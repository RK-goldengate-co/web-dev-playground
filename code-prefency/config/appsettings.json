{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Microsoft.EntityFrameworkCore": "Warning",
      "Hangfire": "Warning"
    },
    "Console": {
      "IncludeScopes": true,
      "FormatterName": "json",
      "FormatterOptions": {
        "IncludeScopes": true,
        "TimestampFormat": "yyyy-MM-dd HH:mm:ss.fff",
        "UseUtcTimestamp": true
      }
    },
    "File": {
      "PathFormat": "logs/app-{Date}.log",
      "FormatterName": "json",
      "MaxFileSize": 10485760,
      "MaxRetainedFiles": 30
    },
    "Elasticsearch": {
      "FormatterName": "json",
      "IndexFormat": "user-management-{0:yyyy.MM.dd}",
      "AutoRegisterTemplate": true,
      "TemplateName": "user-management-logs"
    }
  },

  "ConnectionStrings": {
    "DefaultConnection": "Host=postgres;Port=5432;Database=user_management;Username=user_mgmt_app;Password=${DB_PASSWORD};SSL Mode=Require;Trust Server Certificate=true;",
    "Redis": "redis:6379,password=${REDIS_PASSWORD},ssl=False,abortConnect=False",
    "Elasticsearch": "http://elasticsearch:9200",
    "MongoDB": "mongodb://admin:${MONGO_PASSWORD}@mongodb:27017/user_management_analytics?authSource=admin"
  },

  "Jwt": {
    "Secret": "${JWT_SECRET}",
    "Issuer": "user-management-api",
    "Audience": "user-management-api",
    "ExpirationMinutes": 60,
    "RefreshTokenExpirationDays": 7
  },

  "Security": {
    "Password": {
      "MinLength": 8,
      "RequireUppercase": true,
      "RequireLowercase": true,
      "RequireDigits": true,
      "RequireSpecialCharacters": true,
      "MaxFailedAttempts": 5,
      "LockoutMinutes": 15
    },
    "RateLimiting": {
      "EnableRateLimiting": true,
      "PermitLimit": 100,
      "Window": 60,
      "QueueLimit": 2,
      "SegmentsPerWindow": 4
    },
    "CORS": {
      "AllowedOrigins": [
        "https://yourdomain.com",
        "http://localhost:3000",
        "https://localhost:3000"
      ],
      "AllowedMethods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
      "AllowedHeaders": ["*"],
      "AllowCredentials": true,
      "MaxAge": 86400
    },
    "Headers": {
      "XFrameOptions": "DENY",
      "XContentTypeOptions": "nosniff",
      "XSSProtection": "1; mode=block",
      "StrictTransportSecurity": "max-age=31536000; includeSubDomains",
      "ReferrerPolicy": "strict-origin-when-cross-origin",
      "ContentSecurityPolicy": "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self'; connect-src 'self'; frame-ancestors 'none';"
    }
  },

  "Database": {
    "CommandTimeout": 30,
    "ConnectionRetryCount": 3,
    "ConnectionRetryDelay": 5,
    "EnableSensitiveDataLogging": false,
    "EnableDetailedErrors": false,
    "Migrations": {
      "AutoApply": false,
      "HistoryTable": "__EFMigrationsHistory",
      "Schema": "user_management"
    },
    "Pooling": {
      "MinPoolSize": 5,
      "MaxPoolSize": 100,
      "ConnectionIdleTimeout": 300,
      "ConnectionPruningInterval": 60
    }
  },

  "Cache": {
    "Redis": {
      "InstanceName": "UserManagement:",
      "DefaultExpirationMinutes": 60,
      "SlidingExpirationMinutes": 30,
      "AbsoluteExpirationMinutes": 1440
    },
    "Memory": {
      "SizeLimit": 1024,
      "CompactionPercentage": 0.2,
      "ExpirationScanFrequency": 60
    }
  },

  "Search": {
    "Elasticsearch": {
      "IndexName": "users",
      "BatchSize": 1000,
      "RefreshInterval": "30s",
      "NumberOfShards": 3,
      "NumberOfReplicas": 1
    }
  },

  "Email": {
    "SMTP": {
      "Host": "smtp.gmail.com",
      "Port": 587,
      "Username": "${SMTP_USERNAME}",
      "Password": "${SMTP_PASSWORD}",
      "EnableSSL": true,
      "UseDefaultCredentials": false
    },
    "Templates": {
      "WelcomeEmail": "Templates/Email/Welcome.cshtml",
      "PasswordReset": "Templates/Email/PasswordReset.cshtml",
      "OrderConfirmation": "Templates/Email/OrderConfirmation.cshtml"
    }
  },

  "FileStorage": {
    "Provider": "Local", // Local, Azure, AWS, Google
    "Local": {
      "BasePath": "uploads",
      "MaxFileSize": 10485760, // 10MB
      "AllowedExtensions": [".jpg", ".jpeg", ".png", ".gif", ".pdf", ".doc", ".docx"],
      "CreateSubdirectories": true,
      "CleanupIntervalHours": 24
    },
    "Azure": {
      "ConnectionString": "${AZURE_STORAGE_CONNECTION_STRING}",
      "ContainerName": "user-management-files",
      "CDNUrl": "${AZURE_CDN_URL}"
    }
  },

  "Payments": {
    "Stripe": {
      "PublishableKey": "${STRIPE_PUBLISHABLE_KEY}",
      "SecretKey": "${STRIPE_SECRET_KEY}",
      "WebhookSecret": "${STRIPE_WEBHOOK_SECRET}",
      "EnableTestMode": true
    },
    "PayPal": {
      "ClientId": "${PAYPAL_CLIENT_ID}",
      "ClientSecret": "${PAYPAL_CLIENT_SECRET}",
      "Mode": "sandbox"
    }
  },

  "Analytics": {
    "GoogleAnalytics": {
      "TrackingId": "${GA_TRACKING_ID}",
      "EnableTracking": true,
      "AnonymizeIp": true
    },
    "ApplicationInsights": {
      "InstrumentationKey": "${APPINSIGHTS_INSTRUMENTATIONKEY}",
      "Enable": true,
      "SamplingPercentage": 100.0
    }
  },

  "Features": {
    "EnableAuditLogging": true,
    "EnableMetrics": true,
    "EnableHealthChecks": true,
    "EnableApiVersioning": true,
    "EnableSwagger": true,
    "EnableHangfire": true,
    "EnableSignalR": true,
    "EnableLocalization": true,
    "EnableResponseCompression": true,
    "EnableResponseCaching": true,
    "EnableRequestLogging": true
  },

  "Hangfire": {
    "Dashboard": {
      "Authorization": [
        {
          "Name": "Admin",
          "Policy": "AdminOnly"
        }
      ]
    },
    "Queues": {
      "Default": {
        "WorkerCount": 3
      },
      "Critical": {
        "WorkerCount": 1,
        "Priority": 10
      },
      "Background": {
        "WorkerCount": 2
      }
    },
    "Storage": {
      "ConnectionString": "Host=postgres;Port=5432;Database=user_management;Username=user_mgmt_app;Password=${DB_PASSWORD};"
    }
  },

  "HealthChecks": {
    "Endpoints": {
      "Health": "/health",
      "Detailed": "/health/detailed",
      "Ready": "/ready",
      "Live": "/live"
    },
    "Checks": {
      "Database": {
        "Enabled": true,
        "ConnectionString": "${DB_CONNECTION_STRING}",
        "Timeout": 10
      },
      "Redis": {
        "Enabled": true,
        "ConnectionString": "${REDIS_CONNECTION_STRING}",
        "Timeout": 5
      },
      "Elasticsearch": {
        "Enabled": true,
        "Url": "http://elasticsearch:9200",
        "Timeout": 10
      },
      "Memory": {
        "Enabled": true,
        "Threshold": 0.9
      },
      "Disk": {
        "Enabled": true,
        "Threshold": 0.9
      }
    }
  },

  "Serilog": {
    "Using": ["Serilog.Sinks.Console", "Serilog.Sinks.File", "Serilog.Sinks.Elasticsearch"],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog.Formatting.Json"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/app-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30,
          "formatter": "Serilog.Formatting.Json.JsonFormatter, Serilog.Formatting.Json"
        }
      },
      {
        "Name": "Elasticsearch",
        "Args": {
          "nodeUris": "http://elasticsearch:9200",
          "indexFormat": "user-management-{0:yyyy.MM.dd}",
          "autoRegisterTemplate": true,
          "templateName": "user-management-logs"
        }
      }
    ],
    "Enrich": ["FromLogContext", "WithMachineName", "WithThreadId", "WithExceptionDetails"],
    "Properties": {
      "Application": "UserManagementSystem",
      "Environment": "Production"
    }
  },

  "Kestrel": {
    "Endpoints": {
      "Http": {
        "Url": "http://+:8080"
      },
      "Https": {
        "Url": "https://+:8443",
        "Certificate": {
          "Path": "/etc/ssl/certs/user-management.crt",
          "KeyPath": "/etc/ssl/private/user-management.key"
        }
      }
    },
    "Limits": {
      "MaxConcurrentConnections": 1000,
      "MaxConcurrentUpgradedConnections": 100,
      "MaxRequestBodySize": 10485760,
      "KeepAliveTimeout": "00:02:00",
      "RequestHeadersTimeout": "00:01:00"
    }
  },

  "Localization": {
    "SupportedCultures": ["en-US", "vi-VN"],
    "DefaultCulture": "en-US",
    "ResourcesPath": "Resources",
    "UseNativeDigitGrouping": true
  },

  "ApplicationInsights": {
    "InstrumentationKey": "${APPINSIGHTS_INSTRUMENTATIONKEY}",
    "EnableAdaptiveSampling": true,
    "EnablePerformanceCounterCollection": true,
    "EnableRequestTrackingTelemetryModule": true,
    "EnableDependencyTrackingTelemetryModule": true,
    "EnableEventCounterCollectionModule": true
  },

  "AllowedHosts": "*",
  "ApplicationName": "User Management System",
  "Version": "1.0.0",

  "Swagger": {
    "Title": "User Management API",
    "Version": "v1",
    "Description": "Comprehensive user management system API",
    "Contact": {
      "Name": "CodePrefency Team",
      "Email": "support@codeprefency.com",
      "Url": "https://codeprefency.com"
    },
    "License": {
      "Name": "MIT",
      "Url": "https://opensource.org/licenses/MIT"
    },
    "OAuth2": {
      "ClientId": "swagger-ui",
      "ClientSecret": "swagger-ui-secret",
      "Realm": "swagger-ui-realm",
      "AppName": "User Management API"
    }
  }
}
